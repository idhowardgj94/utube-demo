(this["webpackJsonputube-demo"]=this["webpackJsonputube-demo"]||[]).push([[0],{38:function(e,t,n){},41:function(e,t,n){},47:function(e,t,n){e.exports=n(61)},54:function(e,t,n){},55:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(42),r=n.n(c),s=(n(54),n(10));n(55),n(38);var l=n(18),o=n(23),u=n(24),m=n(65),p=n(32),d=n(66),b=n(62),f=new(function(){function e(){Object(o.a)(this,e),this._event$=new m.a("init"),this._repo$=new m.a(null),this.init(),this._numPerPg=12}return Object(u.a)(e,[{key:"init",value:function(){var e=this;Object(p.a)(fetch("https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&chart=mostPopular&maxResults=50&key=AIzaSyDE83bg6cVc2HymzqOQbBMtYGJuE-d7Nm4").then((function(e){return e.json()}))).pipe(Object(d.a)((function(t){return e._repo$.next(t)})),Object(d.a)(console.log),Object(b.a)((function(e){return Object(p.a)(fetch("\n        https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&chart=mostPopular&maxResults=50&pageToken=".concat(e.nextPageToken,"&key=AIzaSyDE83bg6cVc2HymzqOQbBMtYGJuE-d7Nm4\n        ")).then((function(e){return e.json()})))}))).subscribe((function(t){var n=t.items,a=e._repo$.value;null!==a&&(a.items=a.items.concat(n)),e._repo$.next(a),e._event$.next("ready")}))}},{key:"getPage",value:function(e){var t=e*this._numPerPg,n=this._repo$.value;return console.log("inside getPage",n),null!==n?n.items.slice(t,t+this._numPerPg):[]}},{key:"get",value:function(e){return this._repo$.value?this._repo$.value.items.find((function(t){return t.id===e})):null}},{key:"event",get:function(){return this._event$.value}}]),e}()),h=new(function(){function e(){Object(o.a)(this,e),this._storageKey="like-cache",this._likeList=[],this._likeSubject$=new m.a([]);var t=localStorage.getItem(this._storageKey);void 0!==t&&null!==t&&(this._likeList=JSON.parse(t)),this._sync()}return Object(u.a)(e,[{key:"getLikes",value:function(){return this._likeList.map((function(e){var t=f.get(e);return t?[t]:[]})).flatMap((function(e){return e}))}},{key:"addLike",value:function(e){!this._likeList.find((function(t){return t===e}))&&this._likeList.push(e),this._sync()}},{key:"removeLike",value:function(e){this._likeList=this._likeList.filter((function(t){return t!==e})),this._sync()}},{key:"isLike",value:function(e){return void 0!==this._likeList.find((function(t){return t===e}))}},{key:"_sync",value:function(){localStorage.setItem(this._storageKey,JSON.stringify(this._likeList)),this._likeSubject$.next(this.getLikes())}},{key:"data$",get:function(){return this._likeSubject$.asObservable()}}]),e}());var v=function(e){var t=Object(a.useState)(h.isLike(e.id)),n=Object(s.a)(t,2),i=n[0],c=n[1],r=function(){i?h.removeLike(e.id):h.addLike(e.id),c(!i)};return a.createElement("section",{className:"box"},a.createElement(l.b,{to:"/player/".concat(e.id)},a.createElement("section",{className:"img_container"},a.createElement("img",{src:e.thumbnail.url,alt:"video img"}))),a.createElement("div",{className:"description"},a.createElement("section",null,a.createElement(l.b,{to:"/player/".concat(e.id)},a.createElement("div",{className:"topic"},e.title))),a.createElement("section",{className:"p10"},a.createElement("div",{className:"pl8"},"\u5f71\u7247\u9577\u5ea6: ",e.duration.split("T")[1].replace("M","\u5206").replace("S","\u79d2").replace("H","\u6642")," "," ",i?a.createElement("button",{onClick:r},"\u79fb\u9664\u6536\u85cf"):a.createElement("button",{onClick:r},"\u52a0\u5165\u6536\u85cf")),a.createElement("article",{className:"pl8 text_overflow_ellipsis"},"\u5f71\u7247\u63cf\u8ff0\uff1a",e.description))))},E=n(44),g=n.n(E);n(41);var k=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){i(f.getPage(0))}),[]),a.createElement("div",{className:"container"},a.createElement("section",{className:"wrapper"},null!==n&&n.map((function(e,t){return a.createElement(v,{key:e.id,id:e.id,thumbnail:e.snippet.thumbnails.standard,title:e.snippet.title,description:e.snippet.description,duration:e.contentDetails.duration})}))),a.createElement(g.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:9,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){var t=e.selected;console.log("handle page click",t),i(f.getPage(t))},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}))},y=n(2),_=n(63),O=n(64);var j=function(e){var t=Object(a.useState)(!0),n=Object(s.a)(t,2),i=n[0],c=n[1];return Object(a.useEffect)((function(){var t=e.videoEl,n=Object(_.a)(t.current,"play"),a=Object(_.a)(t.current,"pause"),i=Object(O.a)(n,a).pipe(Object(d.a)((function(){return c((function(e){return!e}))}))).subscribe();return function(){i.unsubscribe()}}),[e]),a.createElement("div",{className:"ad ".concat(i?"":"hide")},a.createElement("h1",{className:"pd10 text_center"},"\u6b64demo\u7bc4\u4f8b\u7531Howarrd\u8a2d\u8a08"))},N=n(45),w=n.n(N);n(60);var L=function(){var e=Object(a.useRef)(null),t=Object(y.f)().id,n=Object(a.useState)(f.get(t)),i=Object(s.a)(n,1)[0];return a.createElement("div",{className:"container"},a.createElement("section",{className:"video_container"},a.createElement(w.a,{url:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",autoplay:!1,controls:!0,width:"100%",height:"auto",playerRef:e,className:"video"}),a.createElement(j,{videoEl:e})),a.createElement("section",{className:"description_card"},a.createElement("h1",{className:"topic"},i&&i.snippet.title),i&&i.snippet.description.split("\n").map((function(e,t){return a.createElement("p",{key:t},e)}))))};var S=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){h._sync();var e=h.data$.subscribe(i);return function(){e.unsubscribe()}}),[]),a.createElement("div",{className:"container"},a.createElement("section",{className:"wrapper"},n.map((function(e,t){return a.createElement(v,{key:e.id,id:e.id,thumbnail:e.snippet.thumbnails.default,title:e.snippet.title,description:e.snippet.description,duration:e.contentDetails.duration})})),0===n.length&&a.createElement("h2",null,"\u60a8\u9084\u6c92\u6709\u4efb\u4f55\u6700\u611b\u5f71\u7247")))};var $=function(){var e=Object(a.useState)("init"),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){f._event$.asObservable().subscribe((function(e){i(e)}))}),[]),"init"===n?a.createElement("div",{className:"container"},a.createElement("h1",null,"\u8b80\u53d6\u4e2d\uff0c\u8acb\u7a0d\u5019......")):a.createElement(a.Fragment,null,a.createElement(l.a,{basename:"/utube-demo"},a.createElement("section",{className:"header"},a.createElement("nav",null,a.createElement("ul",null,a.createElement("li",null,a.createElement(l.b,{to:"/"},"\u9996\u9801")),a.createElement("li",null,a.createElement(l.b,{to:"/like"},"\u6536\u85cf"))))),a.createElement("div",{className:"body"},a.createElement(y.c,null,a.createElement(y.a,{path:"/player/:id"},a.createElement(L,null)),a.createElement(y.a,{path:"/like"},a.createElement(S,null)),a.createElement(y.a,{path:"/"},a.createElement(k,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.d04f0ddb.chunk.js.map